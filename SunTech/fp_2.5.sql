CREATE TABLE FASI.FACT_POSITIONS_DAILY_HISTORY (
BROKER_DEALER_ID_NATURAL_KEY INTEGER,
CUSTODIAN_NATURAL_KEY VARCHAR(21),
ACCOUNT_NATURAL_KEY VARCHAR(66),
NAF_NATURAL_KEY INTEGER,
INVESTOR_NATURAL_KEY VARCHAR(25),
AGE_NATURAL_KEY INTEGER,
BRANCH_ID_NATURAL_KEY INTEGER,
ASSET_ID_NATURAL_KEY VARCHAR(25),
REPRESENTATIVE_NUMBER_NATURAL_KEY VARCHAR(25),
POSITION_DATE_NATURAL_KEY TIMESTAMP,
CURRENCY_CODE_NATURAL_KEY VARCHAR(5),
POSITION_TYPE_NATURAL_KEY VARCHAR(5),
POSITION_QUANTITY DECIMAL(25,8),
POSITION_PRICE DECIMAL(25,8),
POSITION_VALUE DECIMAL(25,8),
INSERT_LOAD_TS TIMESTAMP,
LOAD_USR VARCHAR(20),
LST_UPDATE_TS TIMESTAMP,
LST_UPDATE_USR VARCHAR(20)
);


CREATE TABLE FASI.DIM_CUSTODIANS(
CUSTODIAN_NATURAL_KEY VARCHAR(46) NOT NULL,
BROKER_DEALER_ID INTEGER NOT NULL,
CUSTODIAN_TYPE_ID SMALLINT NOT NULL,
CUSTODIAN VARCHAR(50),
CUSTODIAN_INTEGRATION_ENABLED VARCHAR(28) NOT NULL,
CUSTODIAN_ACTIMIZE_ENABLED VARCHAR(28) NOT NULL,
INSERT_LOAD_TS TIMESTAMP,
LOAD_USR VARCHAR(20),
LST_UPDATE_TS TIMESTAMP,
LST_UPDATE_USR VARCHAR(20),
CONSTRAINT SQL170704081731400 PRIMARY KEY (CUSTODIAN_NATURAL_KEY)
);


CREATE TABLE FASI.DIM_ASSETS (
ASSET_ID_NATURAL_KEY VARCHAR(25) NOT NULL,
ASSET_CUSIP VARCHAR(25),
ASSET_UNDERLYING_CUSIP VARCHAR(25),
ASSET_TICKER VARCHAR(30),
ASSET_FUND_NAME VARCHAR(100),
SPONSOR_CD VARCHAR(20),
SPONSOR_NAME VARCHAR(100),
PRODUCT_CD VARCHAR(100),
ASSET_INVESTMENT_OBJECTIVE VARCHAR(60),
ASSET_FUND_TYPE VARCHAR(60),
ASSET_FUND_CD VARCHAR(15),
ASSET_SHARE_CLASS VARCHAR(2),
ASSET_CUSTOM_RATING_TYPE INTEGER,
ASSET_CLASS VARCHAR(19),
ASSET_PRODUCT_TYPE_CD VARCHAR(10),
ASSET_PRODUCT_DESCRIPTION VARCHAR(50),
ASSET_SECURITY_TYPE_CD VARCHAR(10),
ASSET_SECURITY_DESCRIPTION VARCHAR(50),
ASSET_REIT_FLAG VARCHAR(3),
ASSET_REIT_NON_TRADED_FLAG VARCHAR(3),
ASSET_LEVERAGED_ETF_FLAG VARCHAR(3),
ASSET_INVERSED_ETF_FLAG VARCHAR(3),
ASSET_CATEGORY VARCHAR(255),
MS_STYLEID INTEGER,
MS_STYLEDESC VARCHAR(12),
STOCK_TYPE INTEGER,
STOCKTYPE_DESC VARCHAR(18),
INSERT_LOAD_TS TIMESTAMP,
LOAD_USR VARCHAR(20),
LST_UPDATE_TS TIMESTAMP,
LST_UPDATE_USR VARCHAR(20),
CONSTRAINT SQL170704081608030 PRIMARY KEY (ASSET_ID_NATURAL_KEY)
);


CREATE TABLE EDH.DIM_BD(
BD_ID BIGINT NOT NULL,
BD_CD VARCHAR(50),
BD_NAME VARCHAR(200),
ADDRESS_TYPE VARCHAR(30),
ADDRESS_LINE1 VARCHAR(200),
CITY VARCHAR(100),
STATE VARCHAR(20),
ZIP VARCHAR(20),
COUNTRY VARCHAR(30),
CURRENT_FLG VARCHAR(1),
LOAD_JOB_ID VARCHAR(30),
LOAD_TS TIMESTAMP,
LST_UPDT_JOB_ID VARCHAR(30),
LST_UPDT_TS TIMESTAMP,
LST_POS_AS_OF_DT DATE,
PAYOUT_SCHEDULE VARCHAR(100),
LST_PAID_DT DATE,
LST_MONTHLY_POS_AS_OF_DT DATE
);


CREATE TABLE EDH.DIM_ACCOUNT(
DIM_ACCOUNTS_KEY VARCHAR(100) NOT NULL,
BD_ID BIGINT,
SRC_ACCOUNT_ID VARCHAR(38),
SPONS_ACCOUNT_NO VARCHAR(100),
SPONSOR_NM VARCHAR(100),
SRC_CLIENT_ID VARCHAR(38),
TAX_ID_NB VARCHAR(38),
TRIMMED_SPONS_ACCOUNT_NO VARCHAR(100),
REP_NUMBER VARCHAR(100),
ADVISOR_CRD VARCHAR(150),
BD_SOURCE VARCHAR(75),
DATA_SOURCE VARCHAR(75),
LOB VARCHAR(75),
PROGRAM VARCHAR(500),
PROGRAM_ABBREVIATED VARCHAR(75),
BD_ACCOUNT_TYPE VARCHAR(500),
BD_SOURCE_CODE VARCHAR(35),
PRIMARY_CLASS_CODE VARCHAR(35),
PRIMARY_CLASS_CODE_DESC VARCHAR(75),
TYPE_OF_ACCOUNT VARCHAR(75),
TYPE_OF_ACCOUNT_CATEGORY VARCHAR(75),
TYPE_OF_ACCOUNT_SUB_CATEGORY VARCHAR(75),
REGISTRATION_TYPE_LEVEL1 VARCHAR(500),
INDIVIDUAL_CORP_INDICATOR VARCHAR(75),
REGISTRATION_CODE VARCHAR(75),
SRC_DATA_PROVIDER_NAME VARCHAR(150),
ACCOUNT_TITLE VARCHAR(250),
ACCT_REG1 VARCHAR(500),
ACCT_REG2 VARCHAR(500),
FIRST_HOLDER_FIRST_NM VARCHAR(150),
FIRST_HOLDER_MIDDLE_NM VARCHAR(150),
FIRST_HOLDER_LAST_NM VARCHAR(150),
SECOND_HOLDER_FIRST_NM VARCHAR(150),
SECOND_HOLDER_MIDDLE_NM VARCHAR(150),
SECOND_HOLDER_LAST_NM VARCHAR(150),
SECOND_TAX_ID_NB VARCHAR(38),
ACCOUNT_OPEN_DT DATE,
ACCOUNT_CLOSED_DT DATE,
MARGIN_FLG VARCHAR(10),
ORPHAN_STATUS VARCHAR(50),
DISCRETIONARY_FLG VARCHAR(10),
STATUS VARCHAR(30),
CURRENT_FLG VARCHAR(1),
DELETED_FLG VARCHAR(1),
EFF_START_DT DATE,
EFF_END_DT DATE,
LOAD_JOB_ID VARCHAR(30),
LOAD_TS TIMESTAMP,
LST_UPDT_JOB_ID VARCHAR(30),
LST_UPDT_TS TIMESTAMP
);

CREATE TABLE EDH.DIM_REP_NUMBER (
DIM_REP_NUMBER_KEY VARCHAR(100) NOT NULL,
DIM_BRANCH_KEY VARCHAR(100),
BD_ID BIGINT,
REP_NUMBER VARCHAR(38),
SRC_REP_NUMBER_ID VARCHAR(38),
CLEARING_REP_NUMBER VARCHAR(100),
BRANCH_ID VARCHAR(38),
REP_NUMBER_DESC VARCHAR(100),
REP_NUMBER_TYPE VARCHAR(30),
STATUS VARCHAR(30),
START_DT DATE,
TERM_DT DATE,
CURRENT_FLG VARCHAR(1),
DELETED_FLG VARCHAR(1),
EFF_START_DT DATE,
EFF_END_DT DATE,
LOAD_JOB_ID VARCHAR(30),
LOAD_TS TIMESTAMP,
LST_UPDT_JOB_ID VARCHAR(30),
LST_UPDT_TS TIMESTAMP
);


CREATE TABLE EDH.DIM_CLIENT(
DIM_CLIENT_KEY VARCHAR(100) NOT NULL,
BD_ID BIGINT,
SRC_CLIENT_ID VARCHAR(38),
TAX_ID_NB VARCHAR(38),
TAX_ID_TYPE VARCHAR(25),
FIRST_NM VARCHAR(100),
MIDDLE_NM VARCHAR(100),
LAST_NM VARCHAR(100),
DOB DATE,
GENDER VARCHAR(20),
MARITAL_STATUS VARCHAR(45),
DOMICILE_STATE VARCHAR(20),
MAILING_ADDRESS_LINE1 VARCHAR(200),
MAILING_ADDRESS_LINE2 VARCHAR(200),
MAILING_CITY VARCHAR(100),
MAILING_STATE VARCHAR(20),
MAILING_ZIP VARCHAR(20),
MAILING_COUNTRY VARCHAR(30),
HOME_PHONE_NUMBER VARCHAR(20),
MOBILE_PHONE_NUMBER VARCHAR(20),
FAX_NUMBER VARCHAR(20),
EMAIL_ADDRESS VARCHAR(100),
STATUS VARCHAR(30),
CURRENT_FLG VARCHAR(1),
DELETED_FLG VARCHAR(1),
EFF_START_DT DATE,
EFF_END_DT DATE,
LOAD_JOB_ID VARCHAR(30),
LOAD_TS TIMESTAMP,
LST_UPDT_JOB_ID VARCHAR(30),
LST_UPDT_TS TIMESTAMP
);


CREATE TABLE EDH_STAGING.TEMP_FASI_REF_DATA_PROVIDER_MAPPING(
BD_SOURCE VARCHAR(75),
DATA_SOURCE VARCHAR(75),
INTERFACE_TYPE VARCHAR(75),
SOURCE_DESC VARCHAR(200),
RULE VARCHAR(500),
REF_DATA_PROVIDER_MASTER_KEY BIGINT,
DATA_PROVIDER_DESC VARCHAR(200),
ACTIVE_FLAG VARCHAR(10),
CLEARING_FIRM_FLAG VARCHAR(10),
RNK BIGINT NOT NULL
);



CREATE TABLE REFERENCE_DATA.REF_PRODUCT_MASTER (
CUSIP VARCHAR(20),
SYMBOL VARCHAR(40),
PRODUCT_DESCRIPTION VARCHAR(1000),
SHARE_CLASS VARCHAR(20),
FUND_FAMILY_NUMBER VARCHAR(100),
FUND_FAMILY_NAME VARCHAR(500),
ASSET_TYPE VARCHAR(100),
ASSET_SUBTYPE VARCHAR(200),
ASSET_SUB_SUBTYPE VARCHAR(200),
ASSET_TYPE_DESCRIPTION VARCHAR(500),
ETF_INDICATOR VARCHAR(20),
CALL_IND VARCHAR(20),
PUT_IND VARCHAR(20),
CALL_PUT_INDICATOR VARCHAR(20),
PRIMARY_EXCHANGE VARCHAR(20),
COUPON_RATE DECIMAL(16,4),
FIRST_CALL_PRICE DECIMAL(16,4),
FIRST_PAR_CALL_PRICE DECIMAL(16,4),
BOND_CLASS VARCHAR(20),
POOL_NUMBER VARCHAR(20),
FACTOR DECIMAL(16,4),
FACTOR_DATE DATE,
LAST_COUPON_DATE DATE,
NEXT_PAR_CALL_DATE DATE,
NEXT_PREMIUM_CALL_DATE DATE,
MATURITY_EXPIRE_DATE DATE,
FIRST_COUPON_DAY VARCHAR(20),
CDSC_PCT_YR_1 VARCHAR(20),
CDSC_PCT_YR_2 VARCHAR(20),
CDSC_PCT_YR_3 VARCHAR(20),
CDSC_PCT_YR_4 VARCHAR(20),
CDSC_PCT_YR_5 VARCHAR(20),
CDSC_PCT_YR_6 VARCHAR(20),
CDSC_PCT_YR_7 VARCHAR(20),
CDSC_PCT_YR_8 VARCHAR(20),
CDSC_PCT_YR_9 VARCHAR(20),
CDSC_PCT_YR_10 VARCHAR(20),
ISAPPROVEDPRODUCT VARCHAR(20)
);
